/* empty css             *//* empty css                 *//* empty css                     *//* empty css                *//* empty css                 *//* empty css                  */import{l as q,a as W,b as X,A as $e,E as Z,c as ee,d as Le}from"./request-d25e5098.js";import{B as Me,k as i,f as Ne,S as Oe,c as m,I as n,a as o,W as c,Q as a,R as De,P as f,u as _,o as u,Y as L,a8 as N,cE as ze,X as Re,V as k,cF as Ge,cG as qe,cH as Pe,bf as Qe,bA as He,cz as je,cA as Ye,c7 as Je,_ as Ke}from"./index-cc72fba1.js";import{E as We,e as Xe,d as Ze}from"./index-fc990d5f.js";import{y as el,v as ll,J as ol,j as tl,H as al,F as nl,D as sl,B as ul,K as il,I as rl,M as cl}from"./index-7ea39b32.js";import{E as dl,b as pl}from"./index-65e96144.js";import{E as ml}from"./index-3a607607.js";import{E as vl}from"./index-0c640717.js";import{a as v}from"./axios-f0bb083c.js";import"./index-39086231.js";const g=O=>(je("data-v-05117617"),O=O(),Ye(),O),_l={class:"main",style:{overflow:"hidden"}},gl={class:"head",style:{"margin-left":"1%","background-color":"#fff","margin-top":"1%",padding:"0,20px","margin-right":"1%","overflow-x":"auto"}},fl={class:"ipt"},bl=g(()=>n("span",{class:"iptTitle"},"BotID",-1)),yl={class:"ipt"},hl=g(()=>n("span",{class:"iptTitle"},"昵称",-1)),kl={class:"ipt"},xl=g(()=>n("span",{class:"iptTitle",style:{float:"left","margin-top":"5px"}},"运行状态",-1)),El={class:"ipt"},wl=g(()=>n("span",{class:"iptTitle",style:{float:"left","margin-top":"5px"}},"Bot类型",-1)),Vl={class:"ipt"},Bl=g(()=>n("span",{class:"iptTitle",style:{"padding-right":"5px"}},"沙盒模式",-1)),Cl={style:{width:"150px",height:"50px",float:"left","margin-top":"20px","margin-left":"58px"},class:"button1"},Sl={class:"",style:{"margin-left":"1%","background-color":"#fff","margin-top":"1%",padding:"0,20px","margin-right":"1%",height:"80%",overflow:"auto"}},Il={style:{padding:"20px"}},Tl=g(()=>n("div",{style:{float:"left"}},"机器人列表",-1)),Al={style:{float:"right"}},Ul={key:0,style:{color:"#B7B7B7"}},Fl={key:1},$l={key:0},Ll=g(()=>n("span",{style:{"background-color":"#B7B7B7","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),Ml={key:1},Nl=g(()=>n("span",{style:{"background-color":"#FFC577","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),Ol={key:2},Dl=g(()=>n("span",{style:{"background-color":"#77FA7F","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),zl=g(()=>n("div",null,[n("span",{style:{"background-color":"#FA8577","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}}),n("span",null," 异常")],-1)),Rl={class:"abcde",style:{display:"flex","justify-content":"center","margin-top":"20px"}},Gl={style:{float:"right","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},ql={class:"m-4"},Pl={class:"m-4"},Ql={class:"dialog-footer"},Hl=Me({__name:"botManage",setup(O){let x=i([]),j="";console.log(x,"123");const le=i({});let D="新建机器人";const oe=i(),P=i([]),te=t=>{P.value=t},I=i(!1),E=i(""),w=i(""),V=i(""),B=i(""),C=i(""),r=Ne({name:"",region:"",type:""});let Y="",ae="",ne="";const S=i(!1),M=i(!0),T=i(0),A=i(!0),U=i([]),se=[{value:"0",label:"未登录"},{value:"1",label:"登录中"},{value:"2",label:"已登录"},{value:"3",label:"异常"}],J=[{value:0,label:"公域"},{value:1,label:"私域"}],ue=[{value:!0,label:"沙盒"},{value:!1,label:"正式"}],ie=[{value:"GUILDS",label:"频道事件"},{value:"GUILD_MEMBERS",label:"成员事件"},{value:"GUILD_MESSAGE_REACTIONS",label:"表情表态事件"},{value:"DIRECT_MESSAGE",label:"撤回消息事件"},{value:"AUDIO_OR_LIVE_CHANNEL_MEMBER",label:"音视频/直播子频道成员进出事件"},{value:"INTERACTION",label:"互动事件事件"},{value:"MESSAGE_AUDIT",label:"消息审核事件"},{value:"AUDIO_ACTION",label:"音频播放事件"},{value:"OPEN_FORUMS_EVENT",label:"论坛事件(公域)"},{value:"PUBLIC_GUILD_MESSAGES",label:"消息事件(公域)"},{value:"GUILD_MESSAGES",label:"消息事件(私域)"},{value:"FORUMS_EVENT",label:"论坛事件(私域)"}],z=i(1),R=i(10),re=i(!0),ce=t=>{console.log(`${t} items per page`),S.value=!0,q(0,t,E.value,C.value,w.value,V.value,B.value).then(l=>{console.log(l,"查询结果"),x.value=l.data,S.value=!1})},de=t=>{S.value=!0,q(t-1,R.value,E.value,C.value,w.value,V.value,B.value).then(l=>{console.log(l,"查询结果"),x.value=l.data,S.value=!1})},pe=t=>{ye(t)},me=()=>{q(ae,ne,E.value,C.value,w.value,V.value,B.value).then(t=>{console.log(t,"查询结果"),x.value=t.data})},ve=()=>{C.value="",E.value="",V.value="",B.value="",w.value=""},_e=t=>{cl.confirm("是否确实要关闭此对话框？").then(()=>{t()}).catch(()=>{})},ge=()=>{if(U.value.length!=0&&r.region!=""&&r.type!=""){const t={bot_type:T.value,sand_box:M.value,bot_id:r.region,token:r.type,auto_login:A.value},l={botId:r.region,intents:Je(U.value)},p={bot_type:T.value,sand_box:M.value,bot_id:r.region,token:r.type,auto_login:A.value,id:Y};D=="新建机器人"?$e(t).then(s=>{console.log(s),Z(l).then(y=>{console.log(y,"机器人事件")}),b()}):ee(p).then(s=>{v({message:`${s.msg}`,type:"success"}),Z(l),b()}),I.value=!1,K()}else v.error("请填写完整.")},fe=()=>{I.value=!0,D="新建机器人",K()},be=t=>{if(D="编辑机器人",console.log(t,"原有用户数据"),T.value=t.botType,M.value=t.sandBox,r.region=t.botId,r.type=t.token,A.value=t.autoLogin,t.intents){const l=t.intents;let p=[];l.map(s=>{console.log(s),p.push(s.intentsName)}),U.value=p}Y=t.id,I.value=!0},ye=t=>{Le(t.id).then(l=>{console.log(l,"data1"),l.code=="0"?(v({message:`${l.msg}`,type:"success"}),b()):v({message:`${l.msg}`,type:"error"})})},K=()=>{r.name="",r.region="",r.type="",U.value=[],A.value=!0},he=t=>{ee({id:t.id,auto_login:t.autoLogin}).then(l=>{console.log(l)})},ke=()=>{const t=P.value;t.map((l,p)=>{W(l.botId).then(s=>{console.log(s),s.code==0?(v({message:`${s.msg}`,type:"success"}),console.log(l)):v.error(`${s.msg}`)})}),console.log(t),setTimeout(b,1e3)},xe=()=>{P.value.map((l,p)=>{X(l.botId).then(s=>{console.log(s),s.code==0?(v({message:`${s.msg}`,type:"success"}),b()):v.error(`${s.msg}`)})})},Ee=t=>{W(t).then(l=>{console.log(l),l.code==0?v({message:`${l.msg}`,type:"success"}):v.error(`${l.msg}`)}),setTimeout(b,1e3)},we=t=>{X(t).then(l=>{console.log(l),l.code==0?(v({message:`${l.msg}`,type:"success"}),b()):v.error(`${l.msg}`)})},b=()=>{S.value=!0,q(z.value-1,R.value,E.value,C.value,w.value,V.value,B.value).then(t=>{console.log(t,"查询结果"),x.value=t.data,j=t.extra.count,console.log(z.value,"查询结果"),S.value=!1})};b();const Q=()=>{setTimeout(()=>{const t=T.value,p=document.querySelector(".el-select__tags > span").querySelectorAll(".el-tag--info");console.log(t),p.forEach((s,y)=>{const d=s.querySelector(".el-select__tags-text");(d.innerHTML=="论坛事件(私域)"||d.innerHTML=="消息事件(私域)")&&(t==0?s.style.background="#ffd4d4":s.style.background="#F0F2F5")})},0)};return(t,l)=>{const p=We,s=el,y=ll,d=dl,Ve=Oe,h=ol,Be=ml,G=tl,H=al,Ce=nl,Se=pl,Ie=vl,Te=sl,F=Xe,Ae=Ze,Ue=ul,Fe=il;return u(),m("div",_l,[n("div",gl,[n("div",fl,[bl,o(p,{modelValue:E.value,"onUpdate:modelValue":l[0]||(l[0]=e=>E.value=e),placeholder:"请输入QQ机器人ID",clearable:"",style:{width:"300px"}},null,8,["modelValue"])]),n("div",yl,[hl,o(p,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=e=>C.value=e),placeholder:"请输入QQ机器人昵称",clearable:"",style:{width:"300px"}},null,8,["modelValue"])]),n("div",kl,[xl,c(),o(y,{modelValue:w.value,"onUpdate:modelValue":l[2]||(l[2]=e=>w.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px",float:"left"}},{default:a(()=>[(u(),m(L,null,N(se,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",El,[wl,c(),o(y,{modelValue:V.value,"onUpdate:modelValue":l[3]||(l[3]=e=>V.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px",float:"left"}},{default:a(()=>[(u(),m(L,null,N(J,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",Vl,[Bl,c(),o(y,{modelValue:B.value,"onUpdate:modelValue":l[4]||(l[4]=e=>B.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px"}},{default:a(()=>[(u(),m(L,null,N(ue,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",Cl,[o(d,{onClick:ve},{default:a(()=>[c("重置")]),_:1}),o(d,{type:"primary",onClick:me},{default:a(()=>[c("查询")]),_:1})])]),n("div",Sl,[n("div",Il,[Tl,n("div",Al,[o(d,{type:"primary",onClick:l[5]||(l[5]=e=>fe())},{default:a(()=>[o(Ve,null,{default:a(()=>[o(_(ze))]),_:1}),c("  添加")]),_:1})])]),De((u(),f(_(rl),{ref_key:"multipleTableRef",ref:oe,data:_(x),style:{width:"100%"},onSelectionChange:te,"empty-text":" "},{default:a(()=>[_(x).length?(u(),m(L,{key:0},[o(h,{type:"selection"}),o(h,{property:"botId",label:"QQBotID"}),o(h,{"show-overflow-tooltip":"",property:"username",label:"  昵称"},{default:a(e=>[e.row.username==null?(u(),m("div",Ul," 未登录 ")):(u(),m("div",Fl,Re(e.row.username),1))]),_:1}),o(h,{property:"state",label:"当前状态"},{default:a(e=>[e.row.state=="0"?(u(),m("span",$l,[Ll,c(" 未登录")])):k("",!0),e.row.state=="1"?(u(),m("span",Ml,[Nl,c(" 登录中")])):k("",!0),e.row.state=="2"?(u(),m("span",Ol,[Dl,c(" 已登录")])):k("",!0),e.row.state=="3"?(u(),f(Be,{key:3,class:"box-item",effect:"dark",content:e.row.errorInfo,placement:"right"},{default:a(()=>[zl]),_:2},1032,["content"])):k("",!0)]),_:1}),o(h,{property:"sandBox",label:"运行模式"},{default:a(e=>[e.row.sandBox?(u(),f(G,{key:0},{default:a(()=>[c("沙箱")]),_:1})):k("",!0),e.row.sandBox?k("",!0):(u(),f(G,{key:1,class:"ml-2",type:"success"},{default:a(()=>[c("正式")]),_:1}))]),_:1}),o(h,{property:"autoLogin",label:"自动登录"},{default:a(e=>[o(H,{modelValue:e.row.autoLogin,"onUpdate:modelValue":$=>e.row.autoLogin=$,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#F0F2F5"},onClick:$=>he(e.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1}),o(h,{property:"botType",label:"服务器"},{default:a(e=>[e.row.botType=="0"?(u(),f(G,{key:0},{default:a(()=>[c("公域")]),_:1})):k("",!0),e.row.botType=="1"?(u(),f(G,{key:1,class:"ml-2",type:"success"},{default:a(()=>[c("私域")]),_:1})):k("",!0)]),_:1}),o(h,{property:"",label:"操作"},{default:a(e=>[o(Se,{class:"ml-4"},{default:a(()=>[e.row.state!=2?(u(),f(d,{key:0,type:"success",icon:_(Ge),size:"small",onClick:$=>Ee(e.row.botId)},null,8,["icon","onClick"])):(u(),f(d,{key:1,type:"danger",icon:_(qe),color:"#f59d3c",style:{color:"#FFFFFF"},size:"small",onClick:$=>we(e.row.botId)},null,8,["icon","onClick"])),o(d,{type:"primary",icon:_(Pe),class:"editButton",onClick:$=>be(e.row),size:"small"},null,8,["icon","onClick"]),o(Ce,{"confirm-button-text":"Yes","cancel-button-text":"No",icon:_(Qe),"icon-color":"#626AEF",title:"确认删除此机器人吗?",onConfirm:$=>pe(e.row),size:"small"},{reference:a(()=>[o(d,{type:"primary",icon:_(He),class:"deleteButton",size:"small"},null,8,["icon"])]),_:2},1032,["icon","onConfirm"])]),_:2},1024)]),_:1})],64)):(u(),f(Ie,{key:1,description:"暂无数据"}))]),_:1},8,["data"])),[[Fe,S.value]]),n("div",Rl,[o(Te,{"current-page":z.value,"onUpdate:current-page":l[6]||(l[6]=e=>z.value=e),"page-size":R.value,"onUpdate:page-size":l[7]||(l[7]=e=>R.value=e),"page-sizes":[10,20,50],background:re.value,layout:"total, sizes, prev, pager, next, jumper",total:_(j),onSizeChange:ce,onCurrentChange:de},null,8,["current-page","page-size","background","total"])]),n("div",Gl,[o(d,{type:"success",onClick:l[8]||(l[8]=e=>ke())},{default:a(()=>[c("登录")]),_:1}),o(d,{type:"danger",onClick:l[9]||(l[9]=e=>xe())},{default:a(()=>[c("注销")]),_:1})])]),o(Ue,{modelValue:I.value,"onUpdate:modelValue":l[18]||(l[18]=e=>I.value=e),title:_(D),width:"30%","before-close":_e},{footer:a(()=>[n("span",Ql,[o(d,{onClick:l[16]||(l[16]=e=>I.value=!1)},{default:a(()=>[c("取消")]),_:1}),o(d,{type:"primary",onClick:l[17]||(l[17]=e=>ge())},{default:a(()=>[c(" 确定 ")]),_:1})])]),default:a(()=>[o(Ae,{"label-position":"top","label-width":"100px",model:r,style:{"max-width":"500px"},inline:""},{default:a(()=>[o(F,{label:"BotId",required:"",style:{float:"left"}},{default:a(()=>[o(p,{modelValue:r.region,"onUpdate:modelValue":l[10]||(l[10]=e=>r.region=e),style:{width:"214px"}},null,8,["modelValue"])]),_:1}),o(F,{label:"Token",required:"",style:{float:"left"}},{default:a(()=>[o(p,{modelValue:r.type,"onUpdate:modelValue":l[11]||(l[11]=e=>r.type=e),style:{width:"214px"}},null,8,["modelValue"])]),_:1}),o(F,{label:"订阅事件",required:""},{default:a(()=>[o(y,{id:"test",modelValue:U.value,"onUpdate:modelValue":l[12]||(l[12]=e=>U.value=e),multiple:"",placeholder:"可多选",style:{width:"460px"},ref_key:"select",ref:le,onChange:Q,onVisibleChange:Q},{default:a(()=>[(u(),m(L,null,N(ie,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(F,{label:"服务器",required:"",style:{float:"left"}},{default:a(()=>[n("div",ql,[o(y,{modelValue:T.value,"onUpdate:modelValue":l[13]||(l[13]=e=>T.value=e),placeholder:"必选项",onChange:Q},{default:a(()=>[(u(),m(L,null,N(J,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1}),o(F,{label:"沙盒模式",required:""},{default:a(()=>[n("div",Pl,[o(H,{modelValue:M.value,"onUpdate:modelValue":l[14]||(l[14]=e=>M.value=e),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])])]),_:1}),o(F,{label:"自动登录",required:""},{default:a(()=>[o(H,{modelValue:A.value,"onUpdate:modelValue":l[15]||(l[15]=e=>A.value=e),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const io=Ke(Hl,[["__scopeId","data-v-05117617"]]);export{io as default};
