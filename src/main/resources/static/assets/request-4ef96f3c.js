import{r as i,u as b,a as l}from"./axios-e1d66cd6.js";import{c as d,b as u}from"./vue-router-b22c65b9.js";import{a as B}from"./index-4cf26bfb.js";d({history:u(),routes:i});const h=b(),e=l.create({baseURL:"/api",timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}});e.interceptors.request.use(t=>t,t=>Promise.reject(t));e.interceptors.response.use(t=>{if(t.status==200&&t.data.code==0)return t.data;if(t.data.code==90002)console.log("未登录，无权限使用!"),h.commit("loginState",!1),localStorage.setItem("token","false"),window.location.href="/#/login";else{B({showClose:!0,message:t.data.msg,type:"error"});const o=new Error("接口请求异常...");return Promise.reject(o)}},t=>Promise.reject(t));const f=d({history:u(),routes:i}),r=l.create({baseURL:"/api",timeout:1e4,withCredentials:!0});r.interceptors.request.use(t=>t,t=>Promise.reject(t));r.interceptors.response.use(t=>{if(console.log("响应拦截",t),t.status==200&&t.data.code==0)return t.data;if(t.data.msg=="未登录，无权限使用!")console.log("未登录，无权限使用!"),f.beforeEach((o,n,s)=>{o.name=="login"?s():s("/login")});else{const o=new Error("接口请求异常...");return Promise.reject(o)}},t=>Promise.reject(t));const a={login:"/admin/login",all:"/bot/get-database-all",addBot:"/bot/add",editBot:"/bot/modify",eventBot:"/bot/set-intents",deleteBot:"/bot/del",lookBot:"/bot/get-database-all",loginBot:"/bot/login",logOutBot:"/bot/logout",getHomeData:"/plugin-manage/statistics",AppArr:"/plugin-manage/info-list",sessionId:"/plugin-manage/get-session-id"};localStorage.getItem("token");const S=t=>e({url:`${a.login}`,method:"POST",data:t}),w=t=>e({url:`${a.addBot}`,method:"POST",data:t}),O=t=>e({url:`${a.editBot}`,method:"POST",data:t}),T=t=>r({url:`${a.eventBot}`,method:"POST",data:t}),E=t=>e({url:`${a.deleteBot}`,method:"POST",data:{id:t}}),y=(t,o,n,s,c,m,g)=>e({url:`${a.lookBot}?page=${t}&size=${o}&bot_id=${n}&username=${s}&state=${c}&bot_type=${m}&sand_box=${g}`,method:"GET"}),j=t=>e({url:`${a.loginBot}`,data:{bot_id:t},method:"POST"}),I=t=>e({url:`${a.logOutBot}`,method:"POST",data:{bot_id:t}}),k=()=>e({url:`${a.sessionId}`,method:"GET"});export{w as A,T as E,S as L,j as a,I as b,O as c,E as d,k as g,y as l};
