import{t as pe,i as ve,v as ye,T as Ee}from"./index-326be066.js";import{a1 as be,R as x,j as D,I as Ce,a$ as ge,a5 as Te,az as Se,e as le,g as Ae,W as he,h as we,n as J,b0 as ke,w as K,b1 as Me,N as X,f as Q,l as q,m as U,a as H,v as C,a0 as Le,T as ee,q as R,o as B,c as P,t as V,x as T,u as o,H as De,C as M,B as G,E as Ie,F as W,y as ae,_ as re,d as L,aE as Ne,b2 as Oe,Q as Be,X as Re,A as $e,U as Ye,D as _e,O as ze,P as He,a7 as Ue,z as xe}from"./plugin-vue_export-helper-ac789cde.js";import{c as Z,i as ie,x as oe,ai as Ve,a2 as Fe,a1 as Xe,I as Pe,E as je,a7 as Ke,b as qe,$ as te}from"./index-c5a764ed.js";import{u as Ge}from"./index-e1439c20.js";import{c as We,F as Ze,a as Je}from"./index-ff2930d8.js";import{U as ue}from"./event-9519ab40.js";import{c as se,a as ne}from"./index-cee436c5.js";const Qe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',eo=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,Bo=e=>Array.from(e.querySelectorAll(Qe)).filter(t=>oo(t)&&eo(t)),oo=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Ro=function(e,t,...n){let s;t.includes("mouse")||t.includes("click")?s="MouseEvents":t.includes("key")?s="KeyboardEvent":s="HTMLEvents";const l=document.createEvent(s);return l.initEvent(t,...n),e.dispatchEvent(l),e},to=e=>!e.getAttribute("aria-owns"),$o=(e,t,n)=>{const{parentNode:s}=e;if(!s)return null;const l=s.querySelectorAll(n),d=Array.prototype.indexOf.call(l,e);return l[d+t]||null},Yo=e=>{!e||(e.focus(),!to(e)&&e.click())},so=(...e)=>t=>{e.forEach(n=>{be(n)?n(t):n.value=t})};var F=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(F||{});function no(e){return D(e)&&e.type===Ce}function lo(e){return D(e)&&e.type===ge}function _o(e){return D(e)&&!no(e)&&!lo(e)}const zo=e=>{if(!D(e))return{};const t=e.props||{},n=(D(e.type)?e.type.props:void 0)||{},s={};return Object.keys(n).forEach(l=>{Te(n[l],"default")&&(s[l]=n[l].default)}),Object.keys(t).forEach(l=>{s[Se(l)]=t[l]}),s},Ho=e=>{if(!x(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},j=e=>{const t=x(e)?e:[e],n=[];return t.forEach(s=>{var l;x(s)?n.push(...j(s)):D(s)&&x(s.children)?n.push(...j(s.children)):(n.push(s),D(s)&&((l=s.component)==null?void 0:l.subTree)&&n.push(...j(s.component.subTree)))}),n},ce=Symbol("dialogInjectionKey"),ao=(e,t,n)=>{let s={offsetX:0,offsetY:0};const l=i=>{const c=i.clientX,p=i.clientY,{offsetX:m,offsetY:v}=s,a=e.value.getBoundingClientRect(),f=a.left,S=a.top,$=a.width,Y=a.height,_=document.documentElement.clientWidth,I=document.documentElement.clientHeight,z=-f+m,N=-S+v,A=_-f-$+m,h=I-S-Y+v,O=g=>{const r=Math.min(Math.max(m+g.clientX-c,z),A),b=Math.min(Math.max(v+g.clientY-p,N),h);s={offsetX:r,offsetY:b},e.value.style.transform=`translate(${Z(r)}, ${Z(b)})`},y=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",y)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",l)},u=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",l)};le(()=>{Ae(()=>{n.value?d():u()})}),he(()=>{u()})},ro=e=>{we(e)||pe("[useLockscreen]","You need to pass a ref param to this function");const t=J("popup"),n=ke(()=>t.bm("parent","hidden"));if(!ie||oe(document.body,n.value))return;let s=0,l=!1,d="0";const u=()=>{setTimeout(()=>{Xe(document.body,n.value),l&&(document.body.style.width=d)},200)};K(e,i=>{if(!i){u();return}l=!oe(document.body,n.value),l&&(d=document.body.style.width),s=We(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,p=Ve(document.body,"overflowY");s>0&&(c||p==="scroll")&&l&&(document.body.style.width=`calc(100% - ${s}px)`),Fe(document.body,n.value)}),Me(()=>u())},de=e=>{if(!e)return{onClick:X,onMousedown:X,onMouseup:X};let t=!1,n=!1;return{onClick:u=>{t&&n&&e(u),t=n=!1},onMousedown:u=>{t=u.target===u.currentTarget},onMouseup:u=>{n=u.target===u.currentTarget}}},io=Q({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),uo={click:e=>e instanceof MouseEvent};var co=U({name:"ElOverlay",props:io,emits:uo,setup(e,{slots:t,emit:n}){const s=J("overlay"),l=c=>{n("click",c)},{onClick:d,onMousedown:u,onMouseup:i}=de(e.customMaskEvent?void 0:l);return()=>e.mask?H("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:i},[C(t,"default")],F.STYLE|F.CLASS|F.PROPS,["onClick","onMouseup","onMousedown"]):Le("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const fo=co,fe=Q({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Pe},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),mo={close:()=>!0},po=["aria-label"],vo=["id"],yo=U({name:"ElDialogContent"}),Eo=U({...yo,props:fe,emits:mo,setup(e){const t=e,{t:n}=Ge(),{Close:s}=Ke,{dialogRef:l,headerRef:d,bodyId:u,ns:i,style:c}=ee(ce),{focusTrapRef:p}=ee(Ze),m=so(p,l),v=R(()=>t.draggable);return ao(l,d,v),(a,f)=>(B(),P("div",{ref:o(m),class:T([o(i).b(),o(i).is("fullscreen",a.fullscreen),o(i).is("draggable",o(v)),o(i).is("align-center",a.alignCenter),{[o(i).m("center")]:a.center},a.customClass]),style:ae(o(c)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:d,class:T(o(i).e("header"))},[C(a.$slots,"header",{},()=>[V("span",{role:"heading",class:T(o(i).e("title"))},De(a.title),3)]),a.showClose?(B(),P("button",{key:0,"aria-label":o(n)("el.dialog.close"),class:T(o(i).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=S=>a.$emit("close"))},[H(o(je),{class:T(o(i).e("close"))},{default:M(()=>[(B(),G(Ie(a.closeIcon||o(s))))]),_:1},8,["class"])],10,po)):W("v-if",!0)],2),V("div",{id:o(u),class:T(o(i).e("body"))},[C(a.$slots,"default")],10,vo),a.$slots.footer?(B(),P("footer",{key:0,class:T(o(i).e("footer"))},[C(a.$slots,"footer")],2)):W("v-if",!0)],6))}});var bo=re(Eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Co=Q({...fe,appendToBody:{type:Boolean,default:!1},beforeClose:{type:q(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),go={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ue]:e=>qe(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},To=(e,t)=>{const s=Re().emit,{nextZIndex:l}=ve();let d="";const u=se(),i=se(),c=L(!1),p=L(!1),m=L(!1),v=L(e.zIndex||l());let a,f;const S=Ne("namespace",Oe),$=R(()=>{const E={},k=`--${S.value}-dialog`;return e.fullscreen||(e.top&&(E[`${k}-margin-top`]=e.top),e.width&&(E[`${k}-width`]=Z(e.width))),E}),Y=R(()=>e.alignCenter?{display:"flex"}:{});function _(){s("opened")}function I(){s("closed"),s(ue,!1),e.destroyOnClose&&(m.value=!1)}function z(){s("close")}function N(){f==null||f(),a==null||a(),e.openDelay&&e.openDelay>0?{stop:a}=te(()=>y(),e.openDelay):y()}function A(){a==null||a(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=te(()=>g(),e.closeDelay):g()}function h(){function E(k){k||(p.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(E):A()}function O(){e.closeOnClickModal&&h()}function y(){!ie||(c.value=!0)}function g(){c.value=!1}function r(){s("openAutoFocus")}function b(){s("closeAutoFocus")}function w(E){var k;((k=E.detail)==null?void 0:k.focusReason)==="pointer"&&E.preventDefault()}e.lockScroll&&ro(c);function me(){e.closeOnPressEscape&&h()}return K(()=>e.modelValue,E=>{E?(p.value=!1,N(),m.value=!0,v.value=e.zIndex?v.value++:l(),Be(()=>{s("open"),t.value&&(t.value.scrollTop=0)})):c.value&&A()}),K(()=>e.fullscreen,E=>{!t.value||(E?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),le(()=>{e.modelValue&&(c.value=!0,m.value=!0,N())}),{afterEnter:_,afterLeave:I,beforeLeave:z,handleClose:h,onModalClick:O,close:A,doClose:g,onOpenAutoFocus:r,onCloseAutoFocus:b,onCloseRequested:me,onFocusoutPrevented:w,titleId:u,bodyId:i,closed:p,style:$,overlayDialogStyle:Y,rendered:m,visible:c,zIndex:v}},So=["aria-label","aria-labelledby","aria-describedby"],Ao=U({name:"ElDialog",inheritAttrs:!1}),ho=U({...Ao,props:Co,emits:go,setup(e,{expose:t}){const n=e,s=$e();ne({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!s.title)),ne({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},R(()=>!!n.customClass));const l=J("dialog"),d=L(),u=L(),i=L(),{visible:c,titleId:p,bodyId:m,style:v,overlayDialogStyle:a,rendered:f,zIndex:S,afterEnter:$,afterLeave:Y,beforeLeave:_,handleClose:I,onModalClick:z,onOpenAutoFocus:N,onCloseAutoFocus:A,onCloseRequested:h,onFocusoutPrevented:O}=To(n,d);Ye(ce,{dialogRef:d,headerRef:u,bodyId:m,ns:l,rendered:f,style:v});const y=de(z),g=R(()=>n.draggable&&!n.fullscreen);return t({visible:c,dialogContentRef:i}),(r,b)=>(B(),G(Ue,{to:"body",disabled:!r.appendToBody},[H(Ee,{name:"dialog-fade",onAfterEnter:o($),onAfterLeave:o(Y),onBeforeLeave:o(_),persisted:""},{default:M(()=>[_e(H(o(fo),{"custom-mask-event":"",mask:r.modal,"overlay-class":r.modalClass,"z-index":o(S)},{default:M(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:o(p),"aria-describedby":o(m),class:T(`${o(l).namespace.value}-overlay-dialog`),style:ae(o(a)),onClick:b[0]||(b[0]=(...w)=>o(y).onClick&&o(y).onClick(...w)),onMousedown:b[1]||(b[1]=(...w)=>o(y).onMousedown&&o(y).onMousedown(...w)),onMouseup:b[2]||(b[2]=(...w)=>o(y).onMouseup&&o(y).onMouseup(...w))},[H(o(Je),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(N),onFocusAfterReleased:o(A),onFocusoutPrevented:o(O),onReleaseRequested:o(h)},{default:M(()=>[o(f)?(B(),G(bo,ze({key:0,ref_key:"dialogContentRef",ref:i},r.$attrs,{"custom-class":r.customClass,center:r.center,"align-center":r.alignCenter,"close-icon":r.closeIcon,draggable:o(g),fullscreen:r.fullscreen,"show-close":r.showClose,title:r.title,onClose:o(I)}),He({header:M(()=>[r.$slots.title?C(r.$slots,"title",{key:1}):C(r.$slots,"header",{key:0,close:o(I),titleId:o(p),titleClass:o(l).e("title")})]),default:M(()=>[C(r.$slots,"default")]),_:2},[r.$slots.footer?{name:"footer",fn:M(()=>[C(r.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):W("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,So)]),_:3},8,["mask","overlay-class","z-index"]),[[ye,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var wo=re(ho,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Uo=xe(wo);export{fo as E,F as P,Yo as a,zo as b,go as c,Co as d,no as e,j as f,$o as g,_o as h,to as i,Ho as j,so as k,Uo as l,ao as m,ro as n,Bo as o,de as p,Ro as t,To as u};
