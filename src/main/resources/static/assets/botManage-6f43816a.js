/* empty css                  *//* empty css                 *//* empty css                */import{l as P,a as Ce,b as Ae,A as Ue,E as Y,c as W,d as Te}from"./request-ef4f14bb.js";import{y as De,g as i,aA as Le,O as Me,c,F as n,a as o,R as d,M as t,N as Ne,L as b,u as f,o as u,U as y,a4 as h,cC as Oe,S as Re,Q as E,cD as Ge,bd as Fe,bx as $e,cw as Qe,cx as Pe,c4 as ze}from"./index-ca28b35f.js";import{E as qe,e as je,d as He}from"./index-a5029a0f.js";import{y as Je,v as Ke,J as Ye,j as We,H as Xe,F as Ze,D as el,B as ll,K as ol,I as tl,M as al}from"./index-27ea5ccf.js";import{E as nl,b as sl,_ as ul}from"./index-b4dc2046.js";import{a as rl}from"./index-90009b31.js";import{a as x}from"./axios-a216ff0a.js";const v=O=>(Qe("data-v-290329bf"),O=O(),Pe(),O),il={class:"main",style:{overflow:"hidden"}},dl={class:"head",style:{"margin-left":"1%","background-color":"#fff","margin-top":"1%",padding:"0,20px","margin-right":"1%",height:"125px","overflow-x":"auto"}},cl={class:"ipt"},pl=v(()=>n("span",{class:"iptTitle"},"QQBotID:",-1)),vl={class:"ipt"},_l=v(()=>n("span",{class:"iptTitle"},"昵称:",-1)),ml={class:"ipt"},gl=v(()=>n("span",{class:"iptTitle"},"运行状态:",-1)),bl={class:"ipt"},fl=v(()=>n("span",{class:"iptTitle"},"Bot类型:",-1)),yl={class:"ipt"},hl=v(()=>n("span",{class:"iptTitle"},"沙盒模式:",-1)),El={style:{width:"150px",height:"50px",float:"left","margin-top":"20px","margin-left":"38px"},class:"button1"},xl={class:"",style:{"margin-left":"1%","background-color":"#fff","margin-top":"1%",padding:"0,20px","margin-right":"1%",height:"80%",overflow:"auto"}},kl={style:{padding:"20px"}},Vl=v(()=>n("div",{style:{float:"left"}},"机器人列表",-1)),wl={style:{float:"right"}},Il={key:0,style:{color:"#B7B7B7"}},Sl={key:1},Bl={key:0},Cl=v(()=>n("span",{style:{"background-color":"#B7B7B7","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),Al={key:1},Ul=v(()=>n("span",{style:{"background-color":"#FFC577","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),Tl={key:2},Dl=v(()=>n("span",{style:{"background-color":"#77FA7F","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),Ll=v(()=>n("div",null,[n("span",{style:{"background-color":"#FA8577","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}}),n("span",null," 异常")],-1)),Ml={class:"abcde",style:{display:"flex","justify-content":"center","margin-top":"20px"}},Nl={style:{float:"right","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},Ol={class:"m-4"},Rl={class:"m-4"},Gl={class:"dialog-footer"},Fl=De({__name:"botManage",setup(O){let U=i([]),q="";console.log(U,"123");let R="新建机器人";const X=i(),z=i([]),Z=a=>{z.value=a},T=i(!1),k=i(""),V=i(""),w=i(""),I=i(""),S=i(""),r=Le({name:"",region:"",type:""});let j="",ee="",le="";const B=i(!1),M=i(!0),C=i("0"),N=i(!0),A=i([]),oe=[{value:"0",label:"未登录"},{value:"1",label:"登录中"},{value:"2",label:"已登录"},{value:"3",label:"异常"}],H=[{value:"0",label:"公域"},{value:"1",label:"私域"}],J=[{value:!0,label:"沙盒"},{value:!1,label:"正式"}],te=[{value:!0,label:"自动登录"},{value:!1,label:"手动登录"}],ae=[{value:"GUILDS",label:"频道事件"},{value:"GUILD_MEMBERS",label:"成员事件"},{value:"GUILD_MESSAGE_REACTIONS",label:"表情表态事件"},{value:"DIRECT_MESSAGE",label:"撤回消息事件"},{value:"OPEN_FORUMS_EVENT",label:"论坛事件--公域"},{value:"AUDIO_OR_LIVE_CHANNEL_MEMBER",label:"音视频/直播子频道成员进出事件"},{value:"INTERACTION",label:"互动事件事件"},{value:"MESSAGE_AUDIT",label:"消息审核事件"},{value:"AUDIO_ACTION",label:"音频播放事件"},{value:"PUBLIC_GUILD_MESSAGES",label:"消息事件--公域"}],ne=[{value:"GUILDS",label:"频道事件"},{value:"GUILD_MEMBERS",label:"成员事件"},{value:"GUILD_MESSAGES",label:"消息事件--私域"},{value:"GUILD_MESSAGE_REACTIONS",label:"表情表态事件"},{value:"DIRECT_MESSAGE",label:"撤回消息事件"},{value:"AUDIO_OR_LIVE_CHANNEL_MEMBER",label:"音视频/直播子频道成员进出事件"},{value:"INTERACTION",label:"互动事件事件"},{value:"MESSAGE_AUDIT",label:"消息审核事件"},{value:"FORUMS_EVENT",label:"论坛事件--私域"},{value:"AUDIO_ACTION",label:"音频播放事件"}],G=i(1),F=i(10),se=i(!0),ue=a=>{console.log(`${a} items per page`),B.value=!0,P(0,a,k.value,S.value,V.value,w.value,I.value).then(l=>{console.log(l,"查询结果"),U.value=l.data,B.value=!1})},re=a=>{B.value=!0,P(a-1,F.value,k.value,S.value,V.value,w.value,I.value).then(l=>{console.log(l,"查询结果"),U.value=l.data,B.value=!1})},ie=a=>{ge(a)},de=()=>{P(ee,le,k.value,S.value,V.value,w.value,I.value).then(a=>{console.log(a,"查询结果"),U.value=a.data})},ce=()=>{S.value="",k.value="",w.value="",I.value="",V.value=""},pe=a=>{al.confirm("是否确实要关闭此对话框？").then(()=>{a()}).catch(()=>{})},ve=()=>{if(A.value.length!=0&&r.region!=""&&r.type!=""){const a={bot_type:C.value,sand_box:M.value,bot_id:r.region,token:r.type,auto_login:N.value},l={botId:r.region,intents:ze(A.value)},m={bot_type:C.value,sand_box:M.value,bot_id:r.region,token:r.type,auto_login:N.value,id:j};R=="新建机器人"?Ue(a).then(s=>{console.log(s),Y(l).then(p=>{console.log(p,"机器人事件")}),D()}):W(m).then(s=>{x({message:`${s.msg}`,type:"success"}),Y(l),D()}),T.value=!1,K()}else x.error("请填写完整.")},_e=()=>{T.value=!0,R="新建机器人",K()},me=a=>{R="编辑机器人",console.log(a,"原有用户数据"),C.value=a.botType.toString(),M.value=a.sandBox,r.region=a.botId,r.type=a.token,N.value=a.autoLogin,console.log(C),j=a.id,T.value=!0},ge=a=>{Te(a.id).then(l=>{console.log(l,"data1"),l.code=="0"?(x({message:`${l.msg}`,type:"success"}),D()):x({message:`${l.msg}`,type:"error"})})},K=()=>{r.name="",r.region="",r.type="",A.value=[]},be=a=>{W({id:a.id,auto_login:a.autoLogin}).then(l=>{console.log(l)})},fe=()=>{const a=z.value;a.map((l,m)=>{Ce(l.botId).then(s=>{console.log(s),s.code==0?(x({message:`${s.msg}`,type:"success"}),D()):x.error(`${s.msg}`)})}),console.log(a)},ye=()=>{z.value.map((l,m)=>{Ae(l.botId).then(s=>{console.log(s),s.code==0?(x({message:`${s.msg}`,type:"success"}),D()):x.error(`${s.msg}`)})})},D=()=>{B.value=!0,P(G.value-1,F.value,k.value,S.value,V.value,w.value,I.value).then(a=>{console.log(a,"查询结果"),U.value=a.data,q=a.extra.count,console.log(G.value,"查询结果"),B.value=!1})};return D(),(a,l)=>{const m=qe,s=Je,p=Ke,_=nl,he=Me,g=Ye,Ee=rl,$=We,xe=Xe,ke=Ze,Ve=sl,we=el,L=je,Ie=He,Se=ll,Be=ol;return u(),c("div",il,[n("div",dl,[n("div",cl,[pl,o(m,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=e=>k.value=e),placeholder:"请输入QQ机器人ID",clearable:"",style:{width:"300px"}},null,8,["modelValue"])]),n("div",vl,[_l,o(m,{modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=e=>S.value=e),placeholder:"请输入QQ机器人昵称",clearable:"",style:{width:"300px"}},null,8,["modelValue"])]),n("div",ml,[gl,d(),o(p,{modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px"}},{default:t(()=>[(u(),c(y,null,h(oe,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",bl,[fl,d(),o(p,{modelValue:w.value,"onUpdate:modelValue":l[3]||(l[3]=e=>w.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px"}},{default:t(()=>[(u(),c(y,null,h(H,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",yl,[hl,d(),o(p,{modelValue:I.value,"onUpdate:modelValue":l[4]||(l[4]=e=>I.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px"}},{default:t(()=>[(u(),c(y,null,h(J,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",El,[o(_,{onClick:ce},{default:t(()=>[d("重置")]),_:1}),o(_,{type:"primary",onClick:de},{default:t(()=>[d("查询")]),_:1})])]),n("div",xl,[n("div",kl,[Vl,n("div",wl,[o(_,{type:"primary",onClick:l[5]||(l[5]=e=>_e())},{default:t(()=>[o(he,null,{default:t(()=>[o(f(Oe))]),_:1}),d("  添加")]),_:1})])]),Ne((u(),b(f(tl),{ref_key:"multipleTableRef",ref:X,data:f(U),style:{width:"100%"},onSelectionChange:Z},{default:t(()=>[o(g,{type:"selection"}),o(g,{property:"botId",label:"QQBotID"}),o(g,{"show-overflow-tooltip":"",property:"username",label:"  昵称"},{default:t(e=>[e.row.username==null?(u(),c("div",Il," 未登录 ")):(u(),c("div",Sl,Re(e.row.username),1))]),_:1}),o(g,{property:"state",label:"当前状态"},{default:t(e=>[e.row.state=="0"?(u(),c("span",Bl,[Cl,d(" 未登录")])):E("",!0),e.row.state=="1"?(u(),c("span",Al,[Ul,d(" 登录中")])):E("",!0),e.row.state=="2"?(u(),c("span",Tl,[Dl,d(" 已登录")])):E("",!0),e.row.state=="3"?(u(),b(Ee,{key:3,class:"box-item",effect:"dark",content:e.row.errorInfo,placement:"right"},{default:t(()=>[Ll]),_:2},1032,["content"])):E("",!0)]),_:1}),o(g,{property:"sandBox",label:"运行模式"},{default:t(e=>[e.row.sandBox?(u(),b($,{key:0},{default:t(()=>[d("沙箱")]),_:1})):E("",!0),e.row.sandBox?E("",!0):(u(),b($,{key:1,class:"ml-2",type:"success"},{default:t(()=>[d("正式")]),_:1}))]),_:1}),o(g,{property:"autoLogin",label:"自动登录"},{default:t(e=>[o(xe,{modelValue:e.row.autoLogin,"onUpdate:modelValue":Q=>e.row.autoLogin=Q,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#F0F2F5"},onClick:Q=>be(e.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1}),o(g,{property:"botType",label:"服务器"},{default:t(e=>[e.row.botType=="0"?(u(),b($,{key:0},{default:t(()=>[d("公域")]),_:1})):E("",!0),e.row.botType=="1"?(u(),b($,{key:1,class:"ml-2",type:"success"},{default:t(()=>[d("私域")]),_:1})):E("",!0)]),_:1}),o(g,{property:"",label:"操作"},{default:t(e=>[o(Ve,{class:"ml-4"},{default:t(()=>[o(_,{type:"primary",icon:f(Ge),class:"editButton",onClick:Q=>me(e.row)},null,8,["icon","onClick"]),o(ke,{"confirm-button-text":"Yes","cancel-button-text":"No",icon:f(Fe),"icon-color":"#626AEF",title:"确认删除此机器人吗?",onConfirm:Q=>ie(e.row)},{reference:t(()=>[o(_,{type:"primary",icon:f($e),class:"deleteButton"},null,8,["icon"])]),_:2},1032,["icon","onConfirm"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[Be,B.value]]),n("div",Ml,[o(we,{"current-page":G.value,"onUpdate:current-page":l[6]||(l[6]=e=>G.value=e),"page-size":F.value,"onUpdate:page-size":l[7]||(l[7]=e=>F.value=e),"page-sizes":[10,20,50],background:se.value,layout:"total, sizes, prev, pager, next, jumper",total:f(q),onSizeChange:ue,onCurrentChange:re},null,8,["current-page","page-size","background","total"])]),n("div",Nl,[o(_,{type:"success",onClick:l[8]||(l[8]=e=>fe())},{default:t(()=>[d("登录")]),_:1}),o(_,{type:"danger",onClick:l[9]||(l[9]=e=>ye())},{default:t(()=>[d("注销")]),_:1})])]),o(Se,{modelValue:T.value,"onUpdate:modelValue":l[19]||(l[19]=e=>T.value=e),title:f(R),width:"30%","before-close":pe},{footer:t(()=>[n("span",Gl,[o(_,{onClick:l[17]||(l[17]=e=>T.value=!1)},{default:t(()=>[d("取消")]),_:1}),o(_,{type:"primary",onClick:l[18]||(l[18]=e=>ve())},{default:t(()=>[d(" 确定 ")]),_:1})])]),default:t(()=>[o(Ie,{"label-position":"top","label-width":"100px",model:r,style:{"max-width":"460px"}},{default:t(()=>[o(L,{label:"BotId",required:""},{default:t(()=>[o(m,{modelValue:r.region,"onUpdate:modelValue":l[10]||(l[10]=e=>r.region=e)},null,8,["modelValue"])]),_:1}),o(L,{label:"Token",required:""},{default:t(()=>[o(m,{modelValue:r.type,"onUpdate:modelValue":l[11]||(l[11]=e=>r.type=e)},null,8,["modelValue"])]),_:1}),o(L,{label:"运行模式",required:""},{default:t(()=>[n("div",Ol,[o(p,{modelValue:M.value,"onUpdate:modelValue":l[12]||(l[12]=e=>M.value=e),placeholder:"必选项"},{default:t(()=>[(u(),c(y,null,h(J,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1}),o(L,{label:"服务器",required:""},{default:t(()=>[n("div",Rl,[o(p,{modelValue:C.value,"onUpdate:modelValue":l[13]||(l[13]=e=>C.value=e),placeholder:"必选项"},{default:t(()=>[(u(),c(y,null,h(H,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1}),o(L,{label:"自动登录",required:""},{default:t(()=>[o(p,{modelValue:N.value,"onUpdate:modelValue":l[14]||(l[14]=e=>N.value=e),placeholder:"必选项"},{default:t(()=>[(u(),c(y,null,h(te,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),o(L,{label:"订阅事件",required:""},{default:t(()=>[C.value=="0"?(u(),b(p,{key:0,modelValue:A.value,"onUpdate:modelValue":l[15]||(l[15]=e=>A.value=e),multiple:"",placeholder:"可多选",style:{width:"214px"}},{default:t(()=>[(u(),c(y,null,h(ae,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])):(u(),b(p,{key:1,modelValue:A.value,"onUpdate:modelValue":l[16]||(l[16]=e=>A.value=e),multiple:"",placeholder:"可多选",style:{width:"214px"}},{default:t(()=>[(u(),c(y,null,h(ne,e=>o(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const Wl=ul(Fl,[["__scopeId","data-v-290329bf"]]);export{Wl as default};
