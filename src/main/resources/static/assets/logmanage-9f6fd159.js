/* empty css             *//* empty css                *//* empty css                  */import{g as D}from"./request-48d16785.js";import{E as N}from"./index-36f99aa6.js";import{E as C}from"./index-ec83f0e8.js";import{E as M}from"./index-ff8ad0f0.js";import{b as B}from"./index-c3904ec7.js";import{t as F,e as n,al as H,c as p,a as _,G as y,o as i,z as r,L as S,u as c,N as k,W as E,B as V,cu as z,cv as O}from"./index-ca2c307a.js";import{_ as U}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-40c7c303.js";import"./vue-router-57d62bcf.js";import"./error-3b89c669.js";import"./event-9519ab40.js";import"./index-d834ceac.js";const $=u=>(z("data-v-094482ec"),u=u(),O(),u),J={class:"213",style:{width:"99%",height:"calc(99% - 20px)"}},R={style:{height:"30px",display:"flex","justify-content":"end","align-items":"center","font-size":"16px"}},W={style:{"margin-left":"20px"}},j={style:{"margin-left":"20px"}},G=["innerHTML","onDblclick"],q=["innerHTML","onDblclick"],A=$(()=>r("div",{style:{height:"40px"}},null,-1)),K=F({__name:"logmanage",setup(u){const t=n([]),v=n(0),h=n();let x="";D().then(s=>{x=s.data,T(x)});let o=null,b=location.origin,I=b.indexOf("/")+2,a=n(0);b.slice(I);const T=s=>{o=new WebSocket("ws://103.91.209.111:16590/dash-board"),o.onopen=function(e){console.log(e),console.log("websocket连接成功"),o.send(`{"event" : 2, "JSESSIONID" : "${s}"}`)},o.onmessage=function(e){JSON.parse(e.data).data.map(f=>{t.value[a.value]=f,a.value++,a.value>=1024&&(a.value=0),v.value=t.value.length}),g.value||setTimeout(()=>{h.value.setScrollTop(999999999)},100)},o.onclose=function(e){console.log(e),console.log("websocket已断开")},o.onerror=function(e){console.log("websocket发生错误")}},w=s=>{console.log(s);const e=s.replace('<span class="colour-time">',"").replace('<span class="colour-level">',"").replace('<span class="colour-pid">',"").replace('<span class="colour-class">',"").replace("</span>","").replace("</span>","").replace("</span>","").replace("</span>","").replace('<span class="thread-name">',"").replace("</span>","").replace('<span class="colour-level-error">',"").replace('<span class="colour-level-warning">',"");navigator.clipboard.writeText(e).then(m=>{B({showClose:!0,message:"复制成功",type:"success"})})},g=n(!1),d=n(!1);return H(()=>{o!=null&&o.close()}),(s,e)=>{const m=N,f=C;return i(),p("div",J,[_(f,{class:"box-card",style:{width:"100%",height:"100%","margin-top":"20px","margin-left":"20px","background-color":"#242424",color:"#D3F2F2"},"body-style":{height:"calc(100% - 70px)"}},{default:y(()=>[r("div",R,[r("span",W,[S("双击可复制    暂停滚动 "),_(m,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=l=>g.value=l)},null,8,["modelValue"])]),r("span",j,[S("换行显示 "),_(m,{modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l)},null,8,["modelValue"])])]),_(c(M),{ref_key:"scrollbarRef",ref:h},{default:y(()=>[(i(!0),p(k,null,E(c(v.value)-c(a),l=>(i(),p("p",null,[r("p",{innerHTML:t.value[l+c(a)-1],class:V(d.value?"":"log-text"),onDblclick:L=>w(t.value[l+c(a)-1])},null,42,G)]))),256)),(i(!0),p(k,null,E(c(a),l=>(i(),p("p",null,[r("p",{innerHTML:t.value[l-1],class:V(d.value?"":"log-text"),onDblclick:L=>w(t.value[l-1])},null,42,q)]))),256)),A]),_:1},512)]),_:1},8,["body-style"])])}}});const ie=U(K,[["__scopeId","data-v-094482ec"]]);export{ie as default};
