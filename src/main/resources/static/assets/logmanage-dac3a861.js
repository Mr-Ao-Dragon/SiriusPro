/* empty css             *//* empty css                *//* empty css                  */import{g as L}from"./request-da1fb2e3.js";import{E as M}from"./index-5e1b6380.js";import{E as N}from"./index-14f7352f.js";import{E as F}from"./index-da4bed39.js";import{a as H}from"./index-40b99311.js";import{m as U,d as p,Z as $,o as t,c as n,a as m,C as w,t as _,G as k,u as c,I as S,M as E,x as I,bg as B,bh as O}from"./plugin-vue_export-helper-ac789cde.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";import"./axios-d1decb8a.js";import"./vue-router-5b41d2eb.js";import"./index-326be066.js";import"./index-c5a764ed.js";import"./event-9519ab40.js";import"./index-cee436c5.js";const J=i=>(B("data-v-08958d6c"),i=i(),O(),i),R={class:"213",style:{width:"99%",height:"calc(99% - 20px)"}},j={style:{height:"30px",display:"flex","justify-content":"end","align-items":"center","font-size":"16px"}},G={style:{"margin-left":"20px"}},W={style:{"margin-left":"20px"}},Z=["innerHTML","onDblclick"],q=["innerHTML","onDblclick"],A=J(()=>_("div",{style:{height:"40px"}},null,-1)),K=U({__name:"logmanage",setup(i){const r=p([]),v=p(0),h=p();let x="";L().then(a=>{x=a.data,C(x)});let s=null,b=location.origin,V=b.indexOf("/")+2,o=p(0);const T=b.slice(V),C=a=>{s=new WebSocket(`ws://${T}/dash-board`),s.onopen=function(e){console.log(e),console.log("websocket连接成功"),s.send(`{"event" : 2, "JSESSIONID" : "${a}"}`)},s.onmessage=function(e){JSON.parse(e.data).data.map(f=>{r.value[o.value]=f,o.value++,o.value>=1024&&(o.value=0),v.value=r.value.length}),g.value||setTimeout(()=>{h.value.setScrollTop(999999999)},100)},s.onclose=function(e){console.log(e),console.log("websocket已断开")},s.onerror=function(e){console.log("websocket发生错误")}},y=a=>{console.log(a);const e=a.replace('<span class="colour-time">',"").replace('<span class="colour-level">',"").replace('<span class="colour-pid">',"").replace('<span class="colour-class">',"").replace("</span>","").replace("</span>","").replace("</span>","").replace("</span>","").replace('<span class="thread-name">',"").replace("</span>","").replace('<span class="colour-level-error">',"").replace('<span class="colour-level-warning">',"");navigator.clipboard.writeText(e).then(d=>{H({showClose:!0,message:"复制成功",type:"success"})})},g=p(!1),u=p(!1);return $(()=>{s!=null&&s.close()}),(a,e)=>{const d=M,f=F;return t(),n("div",R,[m(f,{class:"box-card",style:{width:"100%",height:"100%","margin-top":"20px","margin-left":"20px","background-color":"#242424",color:"#D3F2F2"},"body-style":{height:"calc(100% - 70px)"}},{default:w(()=>[_("div",j,[_("span",G,[k("双击可复制    暂停滚动 "),m(d,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=l=>g.value=l)},null,8,["modelValue"])]),_("span",W,[k("换行显示 "),m(d,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=l=>u.value=l)},null,8,["modelValue"])])]),m(c(N),{ref_key:"scrollbarRef",ref:h},{default:w(()=>[(t(!0),n(S,null,E(c(v.value)-c(o),l=>(t(),n("p",null,[(t(),n("p",{innerHTML:r.value[l+c(o)-1],class:I(u.value?"":"log-text"),onDblclick:D=>y(r.value[l+c(o)-1]),key:l+c(o)-1},null,42,Z))]))),256)),(t(!0),n(S,null,E(c(o),l=>(t(),n("p",null,[(t(),n("p",{innerHTML:r.value[l-1],class:I(u.value?"":"log-text"),onDblclick:D=>y(r.value[l-1]),key:l-1},null,42,q))]))),256)),A]),_:1},512)]),_:1},8,["body-style"])])}}});const de=z(K,[["__scopeId","data-v-08958d6c"]]);export{de as default};
