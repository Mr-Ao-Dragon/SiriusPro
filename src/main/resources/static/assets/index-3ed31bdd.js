import{t as pe,i as ve,v as ye,T as Ee}from"./index-61f8e38d.js";import{g as j,u as J,b as le,H as ee,aN as be,ag as Ce,af as ge,c as Q,d as q,R as Te,E as Se,_ as ae,am as Ae,f as he,aw as we,aP as ke,ad as oe,w as Le}from"./index-6295fd1d.js";import{T as Me,f as N,F as Ne,I as x,ay as De,X as Ie,ae as Oe,d as re,e as Be,O as Re,i as $e,az as Ye,w as G,aq as _e,N as P,g as U,a as H,k as C,S as ze,K as te,h as R,o as B,c as X,j as V,n as T,u as o,z as He,q as L,p as W,v as Ue,x as Z,l as ue,b as M,H as xe,P as Ve,m as Fe,L as Pe,t as Xe,E as Ke,G as je,Z as qe}from"./runtime-core.esm-bundler-a054f4a5.js";import{u as Ge}from"./index-76d982ae.js";import{c as We,F as Ze,a as Je}from"./index-ee0e1e3b.js";import{U as ie}from"./event-9519ab40.js";import{c as se,a as ne}from"./index-3df48e54.js";const Qe='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',eo=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,Bo=e=>Array.from(e.querySelectorAll(Qe)).filter(t=>oo(t)&&eo(t)),oo=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Ro=function(e,t,...n){let s;t.includes("mouse")||t.includes("click")?s="MouseEvents":t.includes("key")?s="KeyboardEvent":s="HTMLEvents";const l=document.createEvent(s);return l.initEvent(t,...n),e.dispatchEvent(l),e},to=e=>!e.getAttribute("aria-owns"),$o=(e,t,n)=>{const{parentNode:s}=e;if(!s)return null;const l=s.querySelectorAll(n),d=Array.prototype.indexOf.call(l,e);return l[d+t]||null},Yo=e=>{!e||(e.focus(),!to(e)&&e.click())},so=(...e)=>t=>{e.forEach(n=>{Me(n)?n(t):n.value=t})};var F=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(F||{});function no(e){return N(e)&&e.type===Ne}function lo(e){return N(e)&&e.type===De}function _o(e){return N(e)&&!no(e)&&!lo(e)}const zo=e=>{if(!N(e))return{};const t=e.props||{},n=(N(e.type)?e.type.props:void 0)||{},s={};return Object.keys(n).forEach(l=>{Ie(n[l],"default")&&(s[l]=n[l].default)}),Object.keys(t).forEach(l=>{s[Oe(l)]=t[l]}),s},Ho=e=>{if(!x(e)||e.length>1)throw new Error("expect to receive a single Vue element child");return e[0]},K=e=>{const t=x(e)?e:[e],n=[];return t.forEach(s=>{var l;x(s)?n.push(...K(s)):N(s)&&x(s.children)?n.push(...K(s.children)):(n.push(s),N(s)&&((l=s.component)==null?void 0:l.subTree)&&n.push(...K(s.component.subTree)))}),n},ce=Symbol("dialogInjectionKey"),ao=(e,t,n)=>{let s={offsetX:0,offsetY:0};const l=u=>{const c=u.clientX,p=u.clientY,{offsetX:m,offsetY:v}=s,a=e.value.getBoundingClientRect(),f=a.left,S=a.top,$=a.width,Y=a.height,_=document.documentElement.clientWidth,D=document.documentElement.clientHeight,z=-f+m,I=-S+v,A=_-f-$+m,h=D-S-Y+v,O=g=>{const r=Math.min(Math.max(m+g.clientX-c,z),A),b=Math.min(Math.max(v+g.clientY-p,I),h);s={offsetX:r,offsetY:b},e.value.style.transform=`translate(${j(r)}, ${j(b)})`},y=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",y)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",l)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",l)};re(()=>{Be(()=>{n.value?d():i()})}),Re(()=>{i()})},ro=e=>{$e(e)||pe("[useLockscreen]","You need to pass a ref param to this function");const t=J("popup"),n=Ye(()=>t.bm("parent","hidden"));if(!le||ee(document.body,n.value))return;let s=0,l=!1,d="0";const i=()=>{setTimeout(()=>{ge(document.body,n.value),l&&(document.body.style.width=d)},200)};G(e,u=>{if(!u){i();return}l=!ee(document.body,n.value),l&&(d=document.body.style.width),s=We(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,p=be(document.body,"overflowY");s>0&&(c||p==="scroll")&&l&&(document.body.style.width=`calc(100% - ${s}px)`),Ce(document.body,n.value)}),_e(()=>i())},de=e=>{if(!e)return{onClick:P,onMousedown:P,onMouseup:P};let t=!1,n=!1;return{onClick:i=>{t&&n&&e(i),t=n=!1},onMousedown:i=>{t=i.target===i.currentTarget},onMouseup:i=>{n=i.target===i.currentTarget}}},uo=Q({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),io={click:e=>e instanceof MouseEvent};var co=U({name:"ElOverlay",props:uo,emits:io,setup(e,{slots:t,emit:n}){const s=J("overlay"),l=c=>{n("click",c)},{onClick:d,onMousedown:i,onMouseup:u}=de(e.customMaskEvent?void 0:l);return()=>e.mask?H("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:i,onMouseup:u},[C(t,"default")],F.STYLE|F.CLASS|F.PROPS,["onClick","onMouseup","onMousedown"]):ze("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(t,"default")])}});const fo=co,fe=Q({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Te},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),mo={close:()=>!0},po=["aria-label"],vo=["id"],yo=U({name:"ElDialogContent"}),Eo=U({...yo,props:fe,emits:mo,setup(e){const t=e,{t:n}=Ge(),{Close:s}=Ae,{dialogRef:l,headerRef:d,bodyId:i,ns:u,style:c}=te(ce),{focusTrapRef:p}=te(Ze),m=so(p,l),v=R(()=>t.draggable);return ao(l,d,v),(a,f)=>(B(),X("div",{ref:o(m),class:T([o(u).b(),o(u).is("fullscreen",a.fullscreen),o(u).is("draggable",o(v)),o(u).is("align-center",a.alignCenter),{[o(u).m("center")]:a.center},a.customClass]),style:ue(o(c)),tabindex:"-1"},[V("header",{ref_key:"headerRef",ref:d,class:T(o(u).e("header"))},[C(a.$slots,"header",{},()=>[V("span",{role:"heading",class:T(o(u).e("title"))},He(a.title),3)]),a.showClose?(B(),X("button",{key:0,"aria-label":o(n)("el.dialog.close"),class:T(o(u).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=S=>a.$emit("close"))},[H(o(Se),{class:T(o(u).e("close"))},{default:L(()=>[(B(),W(Ue(a.closeIcon||o(s))))]),_:1},8,["class"])],10,po)):Z("v-if",!0)],2),V("div",{id:o(i),class:T(o(u).e("body"))},[C(a.$slots,"default")],10,vo),a.$slots.footer?(B(),X("footer",{key:0,class:T(o(u).e("footer"))},[C(a.$slots,"footer")],2)):Z("v-if",!0)],6))}});var bo=ae(Eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Co=Q({...fe,appendToBody:{type:Boolean,default:!1},beforeClose:{type:q(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),go={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ie]:e=>he(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},To=(e,t)=>{const s=Ve().emit,{nextZIndex:l}=ve();let d="";const i=se(),u=se(),c=M(!1),p=M(!1),m=M(!1),v=M(e.zIndex||l());let a,f;const S=we("namespace",ke),$=R(()=>{const E={},k=`--${S.value}-dialog`;return e.fullscreen||(e.top&&(E[`${k}-margin-top`]=e.top),e.width&&(E[`${k}-width`]=j(e.width))),E}),Y=R(()=>e.alignCenter?{display:"flex"}:{});function _(){s("opened")}function D(){s("closed"),s(ie,!1),e.destroyOnClose&&(m.value=!1)}function z(){s("close")}function I(){f==null||f(),a==null||a(),e.openDelay&&e.openDelay>0?{stop:a}=oe(()=>y(),e.openDelay):y()}function A(){a==null||a(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=oe(()=>g(),e.closeDelay):g()}function h(){function E(k){k||(p.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(E):A()}function O(){e.closeOnClickModal&&h()}function y(){!le||(c.value=!0)}function g(){c.value=!1}function r(){s("openAutoFocus")}function b(){s("closeAutoFocus")}function w(E){var k;((k=E.detail)==null?void 0:k.focusReason)==="pointer"&&E.preventDefault()}e.lockScroll&&ro(c);function me(){e.closeOnPressEscape&&h()}return G(()=>e.modelValue,E=>{E?(p.value=!1,I(),m.value=!0,v.value=e.zIndex?v.value++:l(),xe(()=>{s("open"),t.value&&(t.value.scrollTop=0)})):c.value&&A()}),G(()=>e.fullscreen,E=>{!t.value||(E?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),re(()=>{e.modelValue&&(c.value=!0,m.value=!0,I())}),{afterEnter:_,afterLeave:D,beforeLeave:z,handleClose:h,onModalClick:O,close:A,doClose:g,onOpenAutoFocus:r,onCloseAutoFocus:b,onCloseRequested:me,onFocusoutPrevented:w,titleId:i,bodyId:u,closed:p,style:$,overlayDialogStyle:Y,rendered:m,visible:c,zIndex:v}},So=["aria-label","aria-labelledby","aria-describedby"],Ao=U({name:"ElDialog",inheritAttrs:!1}),ho=U({...Ao,props:Co,emits:go,setup(e,{expose:t}){const n=e,s=Fe();ne({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R(()=>!!s.title)),ne({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},R(()=>!!n.customClass));const l=J("dialog"),d=M(),i=M(),u=M(),{visible:c,titleId:p,bodyId:m,style:v,overlayDialogStyle:a,rendered:f,zIndex:S,afterEnter:$,afterLeave:Y,beforeLeave:_,handleClose:D,onModalClick:z,onOpenAutoFocus:I,onCloseAutoFocus:A,onCloseRequested:h,onFocusoutPrevented:O}=To(n,d);Pe(ce,{dialogRef:d,headerRef:i,bodyId:m,ns:l,rendered:f,style:v});const y=de(z),g=R(()=>n.draggable&&!n.fullscreen);return t({visible:c,dialogContentRef:u}),(r,b)=>(B(),W(qe,{to:"body",disabled:!r.appendToBody},[H(Ee,{name:"dialog-fade",onAfterEnter:o($),onAfterLeave:o(Y),onBeforeLeave:o(_),persisted:""},{default:L(()=>[Xe(H(o(fo),{"custom-mask-event":"",mask:r.modal,"overlay-class":r.modalClass,"z-index":o(S)},{default:L(()=>[V("div",{role:"dialog","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:o(p),"aria-describedby":o(m),class:T(`${o(l).namespace.value}-overlay-dialog`),style:ue(o(a)),onClick:b[0]||(b[0]=(...w)=>o(y).onClick&&o(y).onClick(...w)),onMousedown:b[1]||(b[1]=(...w)=>o(y).onMousedown&&o(y).onMousedown(...w)),onMouseup:b[2]||(b[2]=(...w)=>o(y).onMouseup&&o(y).onMouseup(...w))},[H(o(Je),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(I),onFocusAfterReleased:o(A),onFocusoutPrevented:o(O),onReleaseRequested:o(h)},{default:L(()=>[o(f)?(B(),W(bo,Ke({key:0,ref_key:"dialogContentRef",ref:u},r.$attrs,{"custom-class":r.customClass,center:r.center,"align-center":r.alignCenter,"close-icon":r.closeIcon,draggable:o(g),fullscreen:r.fullscreen,"show-close":r.showClose,title:r.title,onClose:o(D)}),je({header:L(()=>[r.$slots.title?C(r.$slots,"title",{key:1}):C(r.$slots,"header",{key:0,close:o(D),titleId:o(p),titleClass:o(l).e("title")})]),default:L(()=>[C(r.$slots,"default")]),_:2},[r.$slots.footer?{name:"footer",fn:L(()=>[C(r.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,So)]),_:3},8,["mask","overlay-class","z-index"]),[[ye,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var wo=ae(ho,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Uo=Le(wo);export{fo as E,F as P,Yo as a,zo as b,go as c,Co as d,no as e,K as f,$o as g,_o as h,to as i,Ho as j,so as k,Uo as l,ao as m,ro as n,Bo as o,de as p,Ro as t,To as u};
