/* empty css             *//* empty css                 *//* empty css                     *//* empty css                *//* empty css                 *//* empty css                  */import{l as z,a as Te,b as Ae,A as Ue,E as W,c as X,d as Le}from"./request-4542c74a.js";import{B as Fe,k as i,f as Me,S as De,c as p,I as n,a as t,W as d,Q as a,R as Ne,P as S,u as m,o as u,Y as L,a8 as D,cE as $e,X as Oe,V as b,cF as Re,bf as Ge,bA as qe,cz as ze,cA as Pe,c7 as Qe,_ as He}from"./index-fe97e1b3.js";import{E as je,e as Ye,d as Je}from"./index-8af335f9.js";import{y as Ke,v as We,J as Xe,j as Ze,H as el,F as ll,D as tl,B as ol,K as al,I as nl,M as sl}from"./index-b6bb3e68.js";import{E as ul,b as il}from"./index-f6ac1a7f.js";import{E as rl}from"./index-c45a0aa0.js";import{E as dl}from"./index-8563f196.js";import{a as y}from"./axios-e1153dc7.js";import"./index-930f4313.js";const _=N=>(ze("data-v-ebbcd810"),N=N(),Pe(),N),cl={class:"main",style:{overflow:"hidden"}},pl={class:"head",style:{"margin-left":"1%","background-color":"#fff","margin-top":"1%",padding:"0,20px","margin-right":"1%","overflow-x":"auto"}},vl={class:"ipt"},_l=_(()=>n("span",{class:"iptTitle"},"BotID",-1)),ml={class:"ipt"},gl=_(()=>n("span",{class:"iptTitle"},"昵称",-1)),fl={class:"ipt"},bl=_(()=>n("span",{class:"iptTitle",style:{float:"left","margin-top":"5px"}},"运行状态",-1)),yl={class:"ipt"},hl=_(()=>n("span",{class:"iptTitle",style:{float:"left","margin-top":"5px"}},"Bot类型",-1)),xl={class:"ipt"},kl=_(()=>n("span",{class:"iptTitle",style:{"padding-right":"5px"}},"沙盒模式",-1)),El={style:{width:"150px",height:"50px",float:"left","margin-top":"20px","margin-left":"58px"},class:"button1"},wl={class:"",style:{"margin-left":"1%","background-color":"#fff","margin-top":"1%",padding:"0,20px","margin-right":"1%",height:"80%",overflow:"auto"}},Vl={style:{padding:"20px"}},Bl=_(()=>n("div",{style:{float:"left"}},"机器人列表",-1)),Cl={style:{float:"right"}},Sl={key:0,style:{color:"#B7B7B7"}},Il={key:1},Tl={key:0},Al=_(()=>n("span",{style:{"background-color":"#B7B7B7","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),Ul={key:1},Ll=_(()=>n("span",{style:{"background-color":"#FFC577","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),Fl={key:2},Ml=_(()=>n("span",{style:{"background-color":"#77FA7F","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}},null,-1)),Dl=_(()=>n("div",null,[n("span",{style:{"background-color":"#FA8577","border-radius":"50%",display:"inline-block",width:"8px",height:"8px","margin-bottom":"3px"}}),n("span",null," 异常")],-1)),Nl={class:"abcde",style:{display:"flex","justify-content":"center","margin-top":"20px"}},$l={style:{float:"right","margin-right":"20px","margin-top":"20px","margin-bottom":"20px"}},Ol={class:"m-4"},Rl={class:"m-4"},Gl={class:"dialog-footer"},ql=Fe({__name:"botManage",setup(N){let h=i([]),j="";console.log(h,"123");const Z=i({});let $="新建机器人";const ee=i(),P=i([]),le=o=>{P.value=o},I=i(!1),x=i(""),k=i(""),E=i(""),w=i(""),V=i(""),r=Me({name:"",region:"",type:""});let Y="",te="",oe="";const B=i(!1),F=i(!0),C=i(0),T=i(!0),M=i([]),ae=[{value:"0",label:"未登录"},{value:"1",label:"登录中"},{value:"2",label:"已登录"},{value:"3",label:"异常"}],J=[{value:0,label:"公域"},{value:1,label:"私域"}],ne=[{value:!0,label:"沙盒"},{value:!1,label:"正式"}],se=[{value:"GUILDS",label:"频道事件"},{value:"GUILD_MEMBERS",label:"成员事件"},{value:"GUILD_MESSAGE_REACTIONS",label:"表情表态事件"},{value:"DIRECT_MESSAGE",label:"撤回消息事件"},{value:"AUDIO_OR_LIVE_CHANNEL_MEMBER",label:"音视频/直播子频道成员进出事件"},{value:"INTERACTION",label:"互动事件事件"},{value:"MESSAGE_AUDIT",label:"消息审核事件"},{value:"AUDIO_ACTION",label:"音频播放事件"},{value:"OPEN_FORUMS_EVENT",label:"论坛事件(公域)"},{value:"PUBLIC_GUILD_MESSAGES",label:"消息事件(公域)"},{value:"GUILD_MESSAGES",label:"消息事件(私域)"},{value:"FORUMS_EVENT",label:"论坛事件(私域)"}],O=i(1),R=i(10),ue=i(!0),ie=o=>{console.log(`${o} items per page`),B.value=!0,z(0,o,x.value,V.value,k.value,E.value,w.value).then(l=>{console.log(l,"查询结果"),h.value=l.data,B.value=!1})},re=o=>{B.value=!0,z(o-1,R.value,x.value,V.value,k.value,E.value,w.value).then(l=>{console.log(l,"查询结果"),h.value=l.data,B.value=!1})},de=o=>{fe(o)},ce=()=>{z(te,oe,x.value,V.value,k.value,E.value,w.value).then(o=>{console.log(o,"查询结果"),h.value=o.data})},pe=()=>{V.value="",x.value="",E.value="",w.value="",k.value=""},ve=o=>{sl.confirm("是否确实要关闭此对话框？").then(()=>{o()}).catch(()=>{})},_e=()=>{if(M.value.length!=0&&r.region!=""&&r.type!=""){const o={bot_type:C.value,sand_box:F.value,bot_id:r.region,token:r.type,auto_login:T.value},l={botId:r.region,intents:Qe(M.value)},v={bot_type:C.value,sand_box:F.value,bot_id:r.region,token:r.type,auto_login:T.value,id:Y};$=="新建机器人"?Ue(o).then(s=>{console.log(s),W(l).then(g=>{console.log(g,"机器人事件")}),A()}):X(v).then(s=>{y({message:`${s.msg}`,type:"success"}),W(l),A()}),I.value=!1,K()}else y.error("请填写完整.")},me=()=>{I.value=!0,$="新建机器人",K()},ge=o=>{$="编辑机器人",console.log(o,"原有用户数据"),C.value=o.botType,F.value=o.sandBox,r.region=o.botId,r.type=o.token,T.value=o.autoLogin,console.log(C),Y=o.id,I.value=!0},fe=o=>{Le(o.id).then(l=>{console.log(l,"data1"),l.code=="0"?(y({message:`${l.msg}`,type:"success"}),A()):y({message:`${l.msg}`,type:"error"})})},K=()=>{r.name="",r.region="",r.type="",M.value=[],T.value=!0},be=o=>{X({id:o.id,auto_login:o.autoLogin}).then(l=>{console.log(l)})},ye=()=>{const o=P.value;o.map((l,v)=>{Te(l.botId).then(s=>{console.log(s),s.code==0?(y({message:`${s.msg}`,type:"success"}),A()):y.error(`${s.msg}`)})}),console.log(o)},he=()=>{P.value.map((l,v)=>{Ae(l.botId).then(s=>{console.log(s),s.code==0?(y({message:`${s.msg}`,type:"success"}),A()):y.error(`${s.msg}`)})})},A=()=>{B.value=!0,z(O.value-1,R.value,x.value,V.value,k.value,E.value,w.value).then(o=>{console.log(o,"查询结果"),h.value=o.data,j=o.extra.count,console.log(O.value,"查询结果"),B.value=!1})};A();const Q=()=>{setTimeout(()=>{const o=C.value,v=document.querySelector(".el-select__tags > span").querySelectorAll(".el-tag--info");console.log(o),v.forEach((s,g)=>{const c=s.querySelector(".el-select__tags-text");(c.innerHTML=="论坛事件(私域)"||c.innerHTML=="消息事件(私域)")&&(o==0?s.style.background="#ffd4d4":s.style.background="#F0F2F5")})},0)};return(o,l)=>{const v=je,s=Ke,g=We,c=ul,xe=De,f=Xe,ke=rl,G=Ze,H=el,Ee=ll,we=il,Ve=dl,Be=tl,U=Ye,Ce=Je,Se=ol,Ie=al;return u(),p("div",cl,[n("div",pl,[n("div",vl,[_l,t(v,{modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=e=>x.value=e),placeholder:"请输入QQ机器人ID",clearable:"",style:{width:"300px"}},null,8,["modelValue"])]),n("div",ml,[gl,t(v,{modelValue:V.value,"onUpdate:modelValue":l[1]||(l[1]=e=>V.value=e),placeholder:"请输入QQ机器人昵称",clearable:"",style:{width:"300px"}},null,8,["modelValue"])]),n("div",fl,[bl,d(),t(g,{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=e=>k.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px",float:"left"}},{default:a(()=>[(u(),p(L,null,D(ae,e=>t(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",yl,[hl,d(),t(g,{modelValue:E.value,"onUpdate:modelValue":l[3]||(l[3]=e=>E.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px",float:"left"}},{default:a(()=>[(u(),p(L,null,D(J,e=>t(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",xl,[kl,d(),t(g,{modelValue:w.value,"onUpdate:modelValue":l[4]||(l[4]=e=>w.value=e),class:"m-2",placeholder:"请选择",style:{width:"300px"}},{default:a(()=>[(u(),p(L,null,D(ne,e=>t(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",El,[t(c,{onClick:pe},{default:a(()=>[d("重置")]),_:1}),t(c,{type:"primary",onClick:ce},{default:a(()=>[d("查询")]),_:1})])]),n("div",wl,[n("div",Vl,[Bl,n("div",Cl,[t(c,{type:"primary",onClick:l[5]||(l[5]=e=>me())},{default:a(()=>[t(xe,null,{default:a(()=>[t(m($e))]),_:1}),d("  添加")]),_:1})])]),Ne((u(),S(m(nl),{ref_key:"multipleTableRef",ref:ee,data:m(h),style:{width:"100%"},onSelectionChange:le,"empty-text":" "},{default:a(()=>[m(h).length?(u(),p(L,{key:0},[t(f,{type:"selection"}),t(f,{property:"botId",label:"QQBotID"}),t(f,{"show-overflow-tooltip":"",property:"username",label:"  昵称"},{default:a(e=>[e.row.username==null?(u(),p("div",Sl," 未登录 ")):(u(),p("div",Il,Oe(e.row.username),1))]),_:1}),t(f,{property:"state",label:"当前状态"},{default:a(e=>[e.row.state=="0"?(u(),p("span",Tl,[Al,d(" 未登录")])):b("",!0),e.row.state=="1"?(u(),p("span",Ul,[Ll,d(" 登录中")])):b("",!0),e.row.state=="2"?(u(),p("span",Fl,[Ml,d(" 已登录")])):b("",!0),e.row.state=="3"?(u(),S(ke,{key:3,class:"box-item",effect:"dark",content:e.row.errorInfo,placement:"right"},{default:a(()=>[Dl]),_:2},1032,["content"])):b("",!0)]),_:1}),t(f,{property:"sandBox",label:"运行模式"},{default:a(e=>[e.row.sandBox?(u(),S(G,{key:0},{default:a(()=>[d("沙箱")]),_:1})):b("",!0),e.row.sandBox?b("",!0):(u(),S(G,{key:1,class:"ml-2",type:"success"},{default:a(()=>[d("正式")]),_:1}))]),_:1}),t(f,{property:"autoLogin",label:"自动登录"},{default:a(e=>[t(H,{modelValue:e.row.autoLogin,"onUpdate:modelValue":q=>e.row.autoLogin=q,class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#F0F2F5"},onClick:q=>be(e.row)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1}),t(f,{property:"botType",label:"服务器"},{default:a(e=>[e.row.botType=="0"?(u(),S(G,{key:0},{default:a(()=>[d("公域")]),_:1})):b("",!0),e.row.botType=="1"?(u(),S(G,{key:1,class:"ml-2",type:"success"},{default:a(()=>[d("私域")]),_:1})):b("",!0)]),_:1}),t(f,{property:"",label:"操作"},{default:a(e=>[t(we,{class:"ml-4"},{default:a(()=>[t(c,{type:"primary",icon:m(Re),class:"editButton",onClick:q=>ge(e.row)},null,8,["icon","onClick"]),t(Ee,{"confirm-button-text":"Yes","cancel-button-text":"No",icon:m(Ge),"icon-color":"#626AEF",title:"确认删除此机器人吗?",onConfirm:q=>de(e.row)},{reference:a(()=>[t(c,{type:"primary",icon:m(qe),class:"deleteButton"},null,8,["icon"])]),_:2},1032,["icon","onConfirm"])]),_:2},1024)]),_:1})],64)):(u(),S(Ve,{key:1,description:"暂无数据"}))]),_:1},8,["data"])),[[Ie,B.value]]),n("div",Nl,[t(Be,{"current-page":O.value,"onUpdate:current-page":l[6]||(l[6]=e=>O.value=e),"page-size":R.value,"onUpdate:page-size":l[7]||(l[7]=e=>R.value=e),"page-sizes":[10,20,50],background:ue.value,layout:"total, sizes, prev, pager, next, jumper",total:m(j),onSizeChange:ie,onCurrentChange:re},null,8,["current-page","page-size","background","total"])]),n("div",$l,[t(c,{type:"success",onClick:l[8]||(l[8]=e=>ye())},{default:a(()=>[d("登录")]),_:1}),t(c,{type:"danger",onClick:l[9]||(l[9]=e=>he())},{default:a(()=>[d("注销")]),_:1})])]),t(Se,{modelValue:I.value,"onUpdate:modelValue":l[18]||(l[18]=e=>I.value=e),title:m($),width:"30%","before-close":ve},{footer:a(()=>[n("span",Gl,[t(c,{onClick:l[16]||(l[16]=e=>I.value=!1)},{default:a(()=>[d("取消")]),_:1}),t(c,{type:"primary",onClick:l[17]||(l[17]=e=>_e())},{default:a(()=>[d(" 确定 ")]),_:1})])]),default:a(()=>[t(Ce,{"label-position":"top","label-width":"100px",model:r,style:{"max-width":"500px"},inline:""},{default:a(()=>[t(U,{label:"BotId",required:"",style:{float:"left"}},{default:a(()=>[t(v,{modelValue:r.region,"onUpdate:modelValue":l[10]||(l[10]=e=>r.region=e),style:{width:"214px"}},null,8,["modelValue"])]),_:1}),t(U,{label:"Token",required:"",style:{float:"left"}},{default:a(()=>[t(v,{modelValue:r.type,"onUpdate:modelValue":l[11]||(l[11]=e=>r.type=e),style:{width:"214px"}},null,8,["modelValue"])]),_:1}),t(U,{label:"订阅事件",required:""},{default:a(()=>[t(g,{id:"test",modelValue:M.value,"onUpdate:modelValue":l[12]||(l[12]=e=>M.value=e),multiple:"",placeholder:"可多选",style:{width:"460px"},ref_key:"select",ref:Z,onChange:Q,onVisibleChange:Q},{default:a(()=>[(u(),p(L,null,D(se,e=>t(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(U,{label:"服务器",required:"",style:{float:"left"}},{default:a(()=>[n("div",Ol,[t(g,{modelValue:C.value,"onUpdate:modelValue":l[13]||(l[13]=e=>C.value=e),placeholder:"必选项",onChange:Q},{default:a(()=>[(u(),p(L,null,D(J,e=>t(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),_:1}),t(U,{label:"沙盒模式",required:""},{default:a(()=>[n("div",Rl,[t(H,{modelValue:F.value,"onUpdate:modelValue":l[14]||(l[14]=e=>F.value=e),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])])]),_:1}),t(U,{label:"自动登录",required:""},{default:a(()=>[t(H,{modelValue:T.value,"onUpdate:modelValue":l[15]||(l[15]=e=>T.value=e),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const at=He(ql,[["__scopeId","data-v-ebbcd810"]]);export{at as default};
